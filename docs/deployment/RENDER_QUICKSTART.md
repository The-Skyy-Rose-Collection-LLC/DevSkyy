# DevSkyy Render Deployment - Quick Start

**5-Minute Setup Guide** | **Last Updated**: 2026-01-06

---

## Prerequisites Checklist

- [ ] Render account ([sign up free](https://render.com))
- [ ] GitHub access to DevSkyy repository
- [ ] At least ONE LLM API key (OpenAI, Anthropic, or Google)
- [ ] 20 minutes of time

---

## Step 1: Pre-Flight Check (2 min)

```bash
cd DevSkyy

# Make scripts executable (if not already)
chmod +x scripts/render_deploy_checklist.sh
chmod +x scripts/verify_render_deployment.sh

# Run pre-flight checklist
./scripts/render_deploy_checklist.sh
```

**Expected Output**: ✅ All checks pass (or minor warnings only)

---

## Step 2: Create Render Services (5 min)

### A. PostgreSQL Database

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click **"New +"** → **"PostgreSQL"**
3. Configure:
   ```
   Name:     devskyy-postgres
   Database: devskyy_production
   Region:   Oregon
   Plan:     Standard ($7/month)
   ```
4. Click **"Create Database"**
5. **SAVE** the Internal Database URL (starts with `postgresql://`)

### B. Redis Instance

1. Click **"New +"** → **"Redis"**
2. Configure:
   ```
   Name:   devskyy-redis
   Region: Oregon
   Plan:   Standard ($7/month)
   ```
3. Click **"Create Redis"**
4. **SAVE** the Redis URL (starts with `redis://`)

### C. Web Service

1. Click **"New +"** → **"Blueprint"**
2. Connect **"The-Skyy-Rose-Collection-LLC/DevSkyy"** repository
3. Select branch: **main**
4. Render auto-detects `render.yaml`
5. Click **"Apply"**

---

## Step 3: Configure Environment (8 min)

### Generate Environment Variables

```bash
# Generate secure secrets and formatted env vars
python scripts/render_env_generator.py --output render_env.txt

# Review the generated file
cat render_env.txt
```

### Add to Render

1. Go to your web service → **"Environment"** tab
2. Click **"Add Environment Variable"**
3. Copy variables from `render_env.txt` one by one

**CRITICAL Variables** (Must set these):

```bash
# From Step 2 - Database & Redis
DATABASE_URL=postgresql://devskyy:***@dpg-***/devskyy_production
REDIS_URL=redis://red-***:6379

# Required - Add your LLM API key
OPENAI_API_KEY=sk-proj-***
# OR
ANTHROPIC_API_KEY=sk-ant-***
# OR
GOOGLE_AI_API_KEY=AI***

# Auto-generated by render.yaml (verify these exist)
JWT_SECRET_KEY=<auto-generated>
ENCRYPTION_MASTER_KEY=<auto-generated>

# Application settings
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
CORS_ORIGINS=https://devskyy-dashboard.vercel.app,https://skyyrose.com
```

4. Click **"Save Changes"**

---

## Step 4: Deploy (5 min)

Render automatically deploys after saving environment variables.

**Monitor Progress**:
1. Go to **"Logs"** tab
2. Watch for: `Application startup complete`
3. Status should show **"Live"** (green)

**If deployment fails**: Check logs for errors, verify environment variables.

---

## Step 5: Verify Deployment (2 min)

```bash
# Run verification script
./scripts/verify_render_deployment.sh https://devskyy-api.onrender.com

# Or manually test
curl https://devskyy-api.onrender.com/health
```

**Expected Response**:
```json
{
  "status": "healthy",
  "timestamp": "2026-01-06T...",
  "version": "1.0.0",
  "environment": "production"
}
```

---

## Step 6: Test Key Endpoints (3 min)

```bash
# 1. Health check
curl https://devskyy-api.onrender.com/health

# 2. Readiness (database + redis)
curl https://devskyy-api.onrender.com/health/ready

# 3. List agents
curl https://devskyy-api.onrender.com/api/v1/agents

# 4. API documentation
open https://devskyy-api.onrender.com/docs

# 5. Brand context
curl https://devskyy-api.onrender.com/api/v1/brand/context
```

---

## Optional: Custom Domain Setup

### Add api.skyyrose.com

1. **In Render**: Web Service → Settings → Custom Domains
   - Add: `api.skyyrose.com`
   - Copy CNAME target: `devskyy-api.onrender.com`

2. **In DNS Provider** (Cloudflare, Route53, etc.):
   ```
   Type:  CNAME
   Name:  api
   Value: devskyy-api.onrender.com
   TTL:   Auto
   ```

3. **Wait** 5-60 minutes for DNS propagation

4. **Verify**:
   ```bash
   curl https://api.skyyrose.com/health
   ```

5. **Update CORS** in Render:
   ```bash
   CORS_ORIGINS=https://api.skyyrose.com,https://skyyrose.com,https://devskyy-dashboard.vercel.app
   ```

---

## Cost Summary

| Service | Plan | Cost/Month |
|---------|------|------------|
| Web Service | Starter | $7 |
| PostgreSQL | Standard | $7 |
| Redis | Standard | $7 |
| **Total** | | **$21/month** |

**Free Tier** (testing only):
- 90 days free for PostgreSQL and Redis
- Free web service has cold starts
- Not recommended for production

---

## Troubleshooting

### Build Fails
- Check `requirements.txt` has all dependencies
- Review build logs in Render Dashboard

### 502 Bad Gateway
- Free tier cold starts (upgrade to Starter $7/month)
- Or use cron job to keep service warm

### Database Connection Error
- Verify `DATABASE_URL` is the **Internal** URL
- Check PostgreSQL service is running

### Missing Environment Variable
- Check all variables in Environment tab
- Restart service: Manual Deploy → Deploy

### Slow Response Times
- Free tier has cold starts
- Upgrade to Starter plan for instant responses
- Enable Redis caching

---

## Next Steps

After successful deployment:

1. **Update Frontend**
   ```bash
   # In frontend/.env.production
   NEXT_PUBLIC_BACKEND_URL=https://api.skyyrose.com
   ```

2. **Set Up Monitoring**
   - Configure [UptimeRobot](https://uptimerobot.com)
   - Add [Sentry](https://sentry.io) for error tracking

3. **Production Checklist**
   - [ ] Custom domain configured
   - [ ] SSL certificate active
   - [ ] All endpoints tested
   - [ ] Monitoring alerts set up
   - [ ] Backup strategy in place
   - [ ] Team notified of deployment

---

## Support

- **Full Guide**: [RENDER_DEPLOYMENT_GUIDE.md](./RENDER_DEPLOYMENT_GUIDE.md)
- **Render Docs**: [render.com/docs](https://render.com/docs)
- **Issues**: [GitHub Issues](https://github.com/The-Skyy-Rose-Collection-LLC/DevSkyy/issues)
- **Email**: support@skyyrose.com

---

**Deployment Time**: ~20 minutes
**Difficulty**: Beginner-Friendly
**Status**: Production-Ready ✅
