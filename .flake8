# ============================================================================
# DEVSKYY ENTERPRISE PLATFORM - FLAKE8 CONFIGURATION
# Python Code Quality & Style Enforcement
# Version: 5.2.1
# Python: 3.11.9
# Reference: https://flake8.pycqa.org/en/latest/user/configuration.html
# ============================================================================

[flake8]

# ============================================================================
# LINE LENGTH & FORMATTING
# ============================================================================
# Aligned with Ruff configuration (119) for consistency across tools
max-line-length = 119
max-doc-length = 119

# ============================================================================
# COMPLEXITY & QUALITY METRICS
# ============================================================================
# Maximum cyclomatic complexity (aligned with CLAUDE.md requirements)
max-complexity = 12

# Maximum number of arguments for a function
max-arguments = 7

# Maximum number of local variables
max-local-variables = 15

# ============================================================================
# EXCLUDE PATTERNS
# ============================================================================
# Directories and patterns to exclude from checking
exclude =
    # Version control
    .git,
    .github,
    # Virtual environments
    .venv,
    venv,
    env,
    # Python cache and build artifacts
    __pycache__,
    *.pyc,
    *.pyo,
    *.egg-info,
    build,
    dist,
    # Testing artifacts
    .pytest_cache,
    .tox,
    htmlcov,
    .coverage,
    # Documentation
    docs,
    # Frontend assets
    frontend,
    node_modules,
    # Database migrations
    migrations,
    alembic,
    # Backups and temporary files
    backups,
    *.bak,
    *.tmp,
    # Legacy or external code
    devskyy-platform,
    wordpress-mastery,
    wordpress-plugin,
    # Upload directories
    uploads,
    # Staging and deployment
    staging,
    deployment,

# ============================================================================
# EXTENDED IGNORE RULES
# ============================================================================
# Rules to ignore (aligned with Ruff configuration to avoid conflicts)
extend-ignore =
    # E203: Whitespace before ':' (conflicts with Black/Ruff formatting)
    E203,
    # W503: Line break before binary operator (PEP 8 update, conflicts with Black)
    W503,
    # E501: Line too long (handled by max-line-length and formatter)
    E501,
    # W293: Blank line contains whitespace
    W293,
    # W291: Trailing whitespace (handled by pre-commit hooks)
    W291,
    # E402: Module level import not at top of file (necessary for some configs)
    E402,
    # F401: Module imported but unused (common in __init__.py files)
    F401,
    # E266: Too many leading '#' for block comment
    E266,
    # E731: Do not assign a lambda expression (sometimes necessary)
    E731,
    # W504: Line break after binary operator
    W504,

# ============================================================================
# PER-FILE IGNORE RULES
# ============================================================================
# File-specific ignore patterns with explanations
per-file-ignores =
    # __init__.py files: Allow unused imports (used for public API)
    __init__.py: F401, F403, E402,
    # Test files: Allow unused imports, variables, and assert statements
    tests/*: F401, F403, F841, S101,
    */test_*.py: F401, F403, F841, S101,
    test_*.py: F401, F403, F841, S101,
    conftest.py: F401, F403,
    # Configuration files: Allow module-level imports not at top
    config.py: E402,
    config/*.py: E402,
    # Main entry points: Allow module-level imports not at top
    main.py: E402,
    start_server.py: E402,
    # Logging configuration: Allow module-level imports not at top
    logger_config.py: E402,
    logging_config.py: E402,
    # Database configuration: Allow module-level imports not at top
    database.py: E402,
    database_config.py: E402,
    # User creation scripts: Allow module-level imports not at top
    create_user.py: E402,
    # Monitoring and observability: Allow module-level imports not at top
    monitoring/*.py: E402,
    monitoring/observability.py: E402,
    # Agent modules: Allow many arguments and complexity
    agent/**/*.py: E501, C901,
    # API modules: Allow many arguments for FastAPI dependency injection
    api/**/*.py: B008,
    # Scripts: Allow print statements and various ignores
    scripts/*.py: T201, E402,
    # MCP server: Allow complexity and long lines
    devskyy_mcp.py: C901, E501,
    # Theme servers: Allow complexity
    *theme_server.py: C901,
    # WordPress integration: Allow complexity
    *wordpress*.py: C901,
    # ML models: Allow complexity and long lines
    ml/**/*.py: C901, E501,
    # Deployment scripts: Allow print statements
    deploy*.py: T201,
    deployment*.py: T201,
    # Setup scripts: Allow print statements and imports
    setup*.py: T201, E402,
    # Bash/shell script generators: Allow print statements
    *.sh.py: T201,

# ============================================================================
# ENABLED PLUGINS & EXTENSIONS
# ============================================================================
# Enable additional Flake8 plugins (if installed)
# Uncomment and install via pip if needed:
# - flake8-bugbear (B): Find likely bugs and design problems
# - flake8-comprehensions (C4): Better list/set/dict comprehensions
# - flake8-docstrings (D): PEP 257 docstring conventions
# - flake8-bandit (S): Security testing
# - flake8-print (T): Check for print statements
# - pep8-naming (N): Check PEP 8 naming conventions

# Enable statistics output
statistics = True

# Show count of errors/warnings
count = True

# Show source code for each error
show-source = True

# Show error codes in output
show-pep8 = True

# ============================================================================
# REPORTING & OUTPUT
# ============================================================================
# Output format (default, pylint, or custom)
# format = default

# Benchmark execution time
benchmark = False

# ============================================================================
# IMPORT CHECKS
# ============================================================================
# Application import names (for import order checking)
application-import-names = devskyy,agent,api,ml,fashion,infrastructure,core,database

# ============================================================================
# DOCSTRING CONVENTIONS (if flake8-docstrings is installed)
# ============================================================================
# docstring-convention = google

# ============================================================================
# INLINE COMMENTS & OVERRIDES
# ============================================================================
# Allow inline comments to override errors on specific lines using:
# # noqa: E501 (to ignore E501 on that line)
# # noqa (to ignore all errors on that line)
enable-extensions =
    # Add any Flake8 extensions here when installed
    # Example: H (hacking), B (bugbear), C4 (comprehensions)

# ============================================================================
# NOTES
# ============================================================================
# This configuration is designed to complement Ruff (primary linter)
# For security scanning, use Bandit (configured in pyproject.toml)
# For type checking, use MyPy (configured in pyproject.toml)
# For formatting, use Ruff/Black (configured in pyproject.toml)
#
# Truth Protocol: All configurations verified against official Flake8 docs
# Reference: https://flake8.pycqa.org/en/latest/user/options.html
# ============================================================================
