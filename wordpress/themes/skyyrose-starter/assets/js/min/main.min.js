!function(){"use strict";function e(e){var t=document.getElementById("cartCount");t&&(t.textContent=e||0)}function t(e,t){var n,o=document.getElementById("toast");o||((o=document.createElement("div")).className="toast",o.id="toast",(n=document.createElement("span")).className="toast-message",o.appendChild(n),document.body.appendChild(o));(n=o.querySelector(".toast-message"))?n.textContent=e:o.textContent=e,o.classList.remove("toast-error","toast-success"),"error"===t&&o.classList.add("toast-error"),o.classList.add("show"),setTimeout(function(){o.classList.remove("show")},3e3)}document.addEventListener("DOMContentLoaded",function(){!function(){var e=document.getElementById("navbar");if(!e)return;window.addEventListener("scroll",function(){var t=window.scrollY;t>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})}(),function(){var e=document.getElementById("mobileMenuToggle"),t=document.getElementById("mobileMenuClose"),n=document.getElementById("mobileMenu");if(!e||!n)return;e.addEventListener("click",function(){n.classList.add("is-open"),document.body.style.overflow="hidden"}),t&&t.addEventListener("click",function(){n.classList.remove("is-open"),document.body.style.overflow=""});document.addEventListener("keydown",function(e){"Escape"===e.key&&n.classList.contains("is-open")&&(n.classList.remove("is-open"),document.body.style.overflow="")})}(),function(){var e=document.getElementById("searchToggle"),t=document.getElementById("searchClose"),n=document.getElementById("searchOverlay"),o=n?n.querySelector(".search-input"):null;if(!e||!n)return;e.addEventListener("click",function(){n.classList.add("is-open"),o&&setTimeout(function(){o.focus()},100)}),t&&t.addEventListener("click",function(){n.classList.remove("is-open")});document.addEventListener("keydown",function(e){"Escape"===e.key&&n.classList.contains("is-open")&&n.classList.remove("is-open")})}(),function(){var e=document.getElementById("newsletterForm");if(!e)return;e.addEventListener("submit",function(n){n.preventDefault();var o=e.querySelector('input[name="email"]'),s=e.querySelector('button[type="submit"]');if(o&&o.value){s.disabled=!0,s.textContent="Subscribing...";var a=new FormData;a.append("action","skyyrose_newsletter"),a.append("email",o.value),a.append("nonce",window.skyyrose?window.skyyrose.nonce:""),fetch(window.skyyrose?window.skyyrose.ajax_url:"/wp-admin/admin-ajax.php",{method:"POST",body:a}).then(function(e){return e.json()}).then(function(n){n.success?(t(n.data.message||"Welcome to the SkyyRose family!"),e.reset()):t(n.data.message||"Please try again.","error")}).catch(function(){t("Something went wrong. Please try again.","error")}).finally(function(){s.disabled=!1,s.textContent="Subscribe"})}})}(),document.addEventListener("click",function(n){var o=n.target.closest("[data-add-to-cart]");if(o){n.preventDefault();var s=o.dataset.addToCart,a=o.dataset.quantity||1;if(s){o.disabled=!0;var r=o.textContent;o.textContent="Adding...";var i=new FormData;i.append("action","skyyrose_add_to_cart"),i.append("product_id",s),i.append("quantity",a),i.append("nonce",window.skyyrose?window.skyyrose.nonce:""),fetch(window.skyyrose?window.skyyrose.ajax_url:"/wp-admin/admin-ajax.php",{method:"POST",body:i}).then(function(e){return e.json()}).then(function(n){n.success?(t(n.data.message||"Added to cart!"),e(n.data.cart_count)):t(n.data.message||"Could not add to cart.","error")}).catch(function(){t("Something went wrong.","error")}).finally(function(){o.disabled=!1,o.textContent=r})}}}),document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){var t=this.getAttribute("href");if("#"!==t){var n=document.querySelector(t);n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}))}})}),function(){var e=document.querySelectorAll(".fade-in");if(!e.length)return;var t=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(function(e){t.observe(e)})}()}),window.SkyyRose={showToast:t,updateCartCount:e}}();