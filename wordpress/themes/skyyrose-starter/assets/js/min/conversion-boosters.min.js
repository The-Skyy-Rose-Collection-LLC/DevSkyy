!function(){"use strict";function e(e,t,o){const s=document.createElement(e);return t&&Object.keys(t).forEach(e=>{"className"===e?s.className=t[e]:"textContent"===e?s.textContent=t[e]:e.startsWith("data-")?s.setAttribute(e,t[e]):s[e]=t[e]}),o&&o.forEach(e=>{"string"==typeof e?s.appendChild(document.createTextNode(e)):e&&s.appendChild(e)}),s}window.SkyyRoseConversion={initUrgency:function(){document.querySelectorAll(".live-viewers").forEach(e=>{const t=parseInt(e.dataset.base)||Math.floor(15*Math.random())+5;let o=t;const s=e.querySelector(".viewer-count");setInterval(()=>{const e=Math.random()>.5?1:-1;o=Math.max(3,Math.min(t+10,o+e)),s&&(s.textContent=o)},5e3*Math.random()+3e3)}),this.initRecentPurchases(),this.initStockUrgency()},initRecentPurchases:function(){const t=["Sarah","Michael","Emma","James","Olivia","David","Sophia","Chris"],o=["Los Angeles","New York","Miami","Chicago","Oakland","Atlanta","Houston"],s=document.querySelectorAll(".product-title"),n=Array.from(s).map(e=>e.textContent).slice(0,5);if(0===n.length)return;const i=()=>{const s=t[Math.floor(Math.random()*t.length)],i=o[Math.floor(Math.random()*o.length)],a=n[Math.floor(Math.random()*n.length)],c=Math.floor(30*Math.random())+1,l=e("div",{className:"purchase-notification"},[e("div",{className:"notification-icon",textContent:"ðŸ›’"}),e("div",{className:"notification-content"},[e("strong",{textContent:s}),document.createTextNode(" from "+i),e("br"),e("span",{},[document.createTextNode("purchased "),e("em",{textContent:a})]),e("br"),e("small",{textContent:c+" minutes ago"})]),e("button",{className:"notification-close","aria-label":"Close",textContent:"Ã—"})]);document.body.appendChild(l),setTimeout(()=>l.classList.add("show"),100),setTimeout(()=>{l.classList.remove("show"),setTimeout(()=>l.remove(),300)},5e3),l.querySelector(".notification-close").addEventListener("click",()=>{l.classList.remove("show"),setTimeout(()=>l.remove(),300)})};setTimeout(i,15e3),setInterval(()=>{Math.random()>.6&&i()},45e3)},initStockUrgency:function(){document.querySelectorAll(".stock-urgency").forEach(t=>{const o=parseInt(t.dataset.stock)||0;o>0&&o<=10&&(t.classList.add("low-stock"),t.textContent="",t.appendChild(e("span",{className:"urgency-icon",textContent:"ðŸ”¥"})),t.appendChild(document.createTextNode(" Only "+o+" left in stock!")))})},initStickyCart:function(){if(!document.querySelector(".single_add_to_cart_button"))return;const t=document.querySelector(".product_title")?.textContent||"Product",o=document.querySelector(".price .woocommerce-Price-amount")?.textContent||"",s=document.querySelector(".woocommerce-product-gallery__image img")?.src||"",n=e("div",{className:"sticky-add-to-cart"},[e("div",{className:"sticky-cart-container"},[e("div",{className:"sticky-cart-product"},[s?Object.assign(e("img",{className:"sticky-cart-image",alt:t}),{src:s}):null,e("div",{className:"sticky-cart-info"},[e("span",{className:"sticky-cart-title",textContent:t}),e("span",{className:"sticky-cart-price",textContent:o})])]),e("button",{className:"sticky-cart-button btn btn-primary",textContent:"Add to Cart"})])]);document.body.appendChild(n);const i=document.querySelector(".single_add_to_cart_button"),a=n.querySelector(".sticky-cart-button");window.addEventListener("scroll",()=>{const e=i?.getBoundingClientRect();e&&e.bottom<0?n.classList.add("visible"):n.classList.remove("visible")},{passive:!0}),a.addEventListener("click",()=>i?.click())},initQuickView:function(){document.querySelectorAll(".product-card, .woocommerce-loop-product").forEach(t=>{const o=e("button",{className:"quick-view-btn","aria-label":"Quick view product",textContent:" Quick View"}),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width","20"),s.setAttribute("height","20"),s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("fill","none"),s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-width","2");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z");const i=document.createElementNS("http://www.w3.org/2000/svg","circle");i.setAttribute("cx","12"),i.setAttribute("cy","12"),i.setAttribute("r","3"),s.appendChild(n),s.appendChild(i),o.insertBefore(s,o.firstChild);const a=t.querySelector(".product-image, .woocommerce-loop-product__link");a&&(a.style.position="relative",a.appendChild(o)),o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const o=t.querySelector("a")?.href;o&&this.showQuickView(o)})})},showQuickView:function(t){const o=e("div",{className:"quick-view-modal"},[e("div",{className:"quick-view-overlay"}),e("div",{className:"quick-view-content"},[e("button",{className:"quick-view-close","aria-label":"Close",textContent:"Ã—"}),e("div",{className:"quick-view-loading"},[e("div",{className:"loading-spinner"})]),e("div",{className:"quick-view-body"})])]);document.body.appendChild(o),document.body.classList.add("modal-open"),setTimeout(()=>o.classList.add("show"),10),fetch(t).then(e=>e.text()).then(t=>{const s=(new DOMParser).parseFromString(t,"text/html"),n=s.querySelector(".woocommerce-product-gallery"),i=s.querySelector(".summary, .product-summary"),a=o.querySelector(".quick-view-body");a.textContent="";const c=e("div",{className:"quick-view-gallery"}),l=e("div",{className:"quick-view-summary"});n&&c.appendChild(n.cloneNode(!0)),i&&l.appendChild(i.cloneNode(!0)),a.appendChild(c),a.appendChild(l),o.querySelector(".quick-view-loading").style.display="none"}).catch(()=>{const s=o.querySelector(".quick-view-loading");s.textContent="Could not load product. ";const n=e("a",{href:t,textContent:"View full page"});s.appendChild(n)});const s=()=>{o.classList.remove("show"),document.body.classList.remove("modal-open"),setTimeout(()=>o.remove(),300)};o.querySelector(".quick-view-close").addEventListener("click",s),o.querySelector(".quick-view-overlay").addEventListener("click",s),document.addEventListener("keydown",e=>{"Escape"===e.key&&s()},{once:!0})},initExitIntent:function(){if(sessionStorage.getItem("skyyrose_exit_shown"))return;let t=!1;const o=()=>{if(t)return;t=!0,sessionStorage.setItem("skyyrose_exit_shown","true");const o=e("form",{className:"exit-popup-form",id:"exitIntentForm"},[e("input",{type:"email",placeholder:"Enter your email",required:!0}),e("button",{type:"submit",className:"btn btn-primary",textContent:"Claim My 15% Off"})]),s=e("div",{className:"exit-intent-popup"},[e("div",{className:"exit-popup-overlay"}),e("div",{className:"exit-popup-content"},[e("button",{className:"exit-popup-close","aria-label":"Close",textContent:"Ã—"}),e("div",{className:"exit-popup-body"},[e("span",{className:"exit-popup-label",textContent:"Wait! Before you go..."}),e("h2",{textContent:"Get 15% Off Your First Order"}),e("p",{textContent:"Join the SkyyRose family and receive exclusive access to new collections, styling tips, and special offers."}),o,e("p",{className:"exit-popup-note",textContent:"No spam, ever. Unsubscribe anytime."})])])]);document.body.appendChild(s),setTimeout(()=>s.classList.add("show"),10);const n=()=>{s.classList.remove("show"),setTimeout(()=>s.remove(),300)};s.querySelector(".exit-popup-close").addEventListener("click",n),s.querySelector(".exit-popup-overlay").addEventListener("click",n),o.addEventListener("submit",t=>{t.preventDefault();const i=o.querySelector('input[type="email"]').value;window.skyyrose?.ajax_url&&fetch(window.skyyrose.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action=skyyrose_newsletter&email="+encodeURIComponent(i)+"&nonce="+window.skyyrose.nonce});const a=s.querySelector(".exit-popup-body");a.textContent="",a.appendChild(e("div",{className:"exit-popup-success"},[e("span",{className:"success-icon",textContent:"âœ“"}),e("h3",{textContent:"You're In!"}),e("p",{textContent:"Check your email for your 15% discount code."}),e("p",{className:"discount-code"},[document.createTextNode("Use code: "),e("strong",{textContent:"WELCOME15"})])])),setTimeout(n,4e3)})};document.addEventListener("mouseout",e=>{e.clientY<=0&&!t&&o()});let s=window.scrollY,n=0;window.addEventListener("scroll",()=>{window.scrollY<s-100?(n++,n>=3&&window.scrollY<200&&o()):n=0,s=window.scrollY},{passive:!0})},initSizeGuide:function(){const t=document.querySelectorAll('.variations select[id*="size"], .size-options');0!==t.length&&t.forEach(t=>{const o=e("button",{className:"size-guide-link",type:"button",textContent:"ðŸ“ Size Guide"});t.parentNode.insertBefore(o,t.nextSibling),o.addEventListener("click",()=>this.showSizeGuide())})},showSizeGuide:function(){const t=(t,o)=>{const s=e("table"),n=e("thead"),i=e("tr");t.forEach(t=>i.appendChild(e("th",{textContent:t}))),n.appendChild(i),s.appendChild(n);const a=e("tbody");return o.forEach(t=>{const o=e("tr");t.forEach(t=>o.appendChild(e("td",{textContent:t}))),a.appendChild(o)}),s.appendChild(a),s},o=t(["Size","US","Bust","Waist","Hips"],[["XS","0-2",'31-32"','23-24"','33-34"'],["S","4-6",'33-34"','25-26"','35-36"'],["M","8-10",'35-36"','27-28"','37-38"'],["L","12-14",'37-39"','29-31"','39-41"'],["XL","16-18",'40-42"','32-34"','42-44"']]),s=t(["Size","US","Waist","Hips","Inseam"],[["XS","0-2",'23-24"','33-34"','30"'],["S","4-6",'25-26"','35-36"','30"'],["M","8-10",'27-28"','37-38"','31"'],["L","12-14",'29-31"','39-41"','31"'],["XL","16-18",'32-34"','42-44"','32"']]),n=t(["Size","US","Bust","Waist","Length"],[["XS","0-2",'31-32"','23-24"','35"'],["S","4-6",'33-34"','25-26"','36"'],["M","8-10",'35-36"','27-28"','37"'],["L","12-14",'37-39"','29-31"','38"'],["XL","16-18",'40-42"','32-34"','39"']]),i=e("div",{className:"size-guide-table","data-content":"tops"},[o]),a=e("div",{className:"size-guide-table","data-content":"bottoms"},[s]),c=e("div",{className:"size-guide-table","data-content":"dresses"},[n]);a.style.display="none",c.style.display="none";const l=e("div",{className:"size-guide-modal"},[e("div",{className:"size-guide-overlay"}),e("div",{className:"size-guide-content"},[e("button",{className:"size-guide-close","aria-label":"Close",textContent:"Ã—"}),e("h2",{textContent:"Size Guide"}),e("div",{className:"size-guide-tabs"},[e("button",{className:"size-tab active","data-tab":"tops",textContent:"Tops"}),e("button",{className:"size-tab","data-tab":"bottoms",textContent:"Bottoms"}),e("button",{className:"size-tab","data-tab":"dresses",textContent:"Dresses"})]),i,a,c,e("div",{className:"size-guide-tip"},[e("strong",{textContent:"ðŸ’¡ Tip: "}),document.createTextNode("When in doubt, size up for a relaxed fit. Our pieces are designed for comfort and movement.")])])]);document.body.appendChild(l),setTimeout(()=>l.classList.add("show"),10),l.querySelectorAll(".size-tab").forEach(e=>{e.addEventListener("click",()=>{l.querySelectorAll(".size-tab").forEach(e=>e.classList.remove("active")),e.classList.add("active"),l.querySelectorAll(".size-guide-table").forEach(e=>e.style.display="none"),l.querySelector('.size-guide-table[data-content="'+e.dataset.tab+'"]').style.display="block"})});const r=()=>{l.classList.remove("show"),setTimeout(()=>l.remove(),300)};l.querySelector(".size-guide-close").addEventListener("click",r),l.querySelector(".size-guide-overlay").addEventListener("click",r)},initTrustBadges:function(){const t=document.querySelector(".single_add_to_cart_button");if(!t)return;const o=e("div",{className:"trust-badges"},[{icon:"ðŸ”’",text:"Secure Checkout"},{icon:"ðŸšš",text:"Free Shipping $150+"},{icon:"â†©ï¸",text:"30-Day Returns"},{icon:"ðŸ’³",text:"Pay in 4 with Klarna"}].map(t=>e("div",{className:"trust-badge"},[e("span",{className:"badge-icon",textContent:t.icon}),e("span",{textContent:t.text})])));t.parentNode.insertBefore(o,t.nextSibling)},initWishlist:function(){const t=JSON.parse(localStorage.getItem("skyyrose_wishlist")||"[]");document.querySelectorAll(".product-card, .woocommerce-loop-product, .product").forEach(o=>{const s=o.dataset.productId||o.querySelector("[data-product_id]")?.dataset.product_id;if(!s)return;const n=t.includes(s),i=e("button",{className:"wishlist-btn"+(n?" active":""),"aria-label":n?"Remove from wishlist":"Add to wishlist",textContent:n?"â¤ï¸":"ðŸ¤"});i.dataset.productId=s;const a=o.querySelector(".product-image, .woocommerce-loop-product__link, .woocommerce-product-gallery");a&&a.appendChild(i),i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.toggleWishlist(s,i)})}),this.updateWishlistCount()},toggleWishlist:function(e,t){let o=JSON.parse(localStorage.getItem("skyyrose_wishlist")||"[]");o.includes(e)?(o=o.filter(t=>t!==e),t.classList.remove("active"),t.textContent="ðŸ¤",t.setAttribute("aria-label","Add to wishlist"),window.SkyyRose?.showToast("Removed from wishlist")):(o.push(e),t.classList.add("active"),t.textContent="â¤ï¸",t.setAttribute("aria-label","Remove from wishlist"),window.SkyyRose?.showToast("Added to wishlist â¤ï¸")),localStorage.setItem("skyyrose_wishlist",JSON.stringify(o)),this.updateWishlistCount()},updateWishlistCount:function(){const e=JSON.parse(localStorage.getItem("skyyrose_wishlist")||"[]");document.querySelectorAll(".wishlist-count").forEach(t=>{t.textContent=e.length,t.style.display=e.length>0?"flex":"none"})},initCountdown:function(){document.querySelectorAll("[data-countdown]").forEach(t=>{const o=new Date(t.dataset.countdown),s=()=>{const s=new Date,n=o-s;if(t.textContent="",n<=0)return void t.appendChild(e("span",{className:"countdown-ended",textContent:"Sale Ended"}));[{value:Math.floor(n/864e5),label:"Days"},{value:Math.floor(n%864e5/36e5),label:"Hours"},{value:Math.floor(n%36e5/6e4),label:"Min"},{value:Math.floor(n%6e4/1e3),label:"Sec"}].forEach(o=>{t.appendChild(e("div",{className:"countdown-unit"},[e("span",{className:"countdown-value",textContent:o.value}),e("span",{className:"countdown-label",textContent:o.label})]))})};s(),setInterval(s,1e3)})},initUpsells:function(){const t=document.querySelector(".related.products, .up-sells");if(t){const e=t.querySelector("h2");e&&(e.textContent="âœ¨ Complete Your Look")}const o=document.querySelector(".woocommerce-cart-form");if(o){const t=e("div",{className:"cart-upsell-banner"},[e("div",{className:"upsell-content"},[e("span",{className:"upsell-icon",textContent:"ðŸŽ"}),e("div",{className:"upsell-text"},[e("strong",{textContent:"You're $50 away from free shipping!"}),e("span",{textContent:"Add more items to qualify"})]),e("a",{href:"/shop",className:"btn btn-outline-sm",textContent:"Keep Shopping"})]),e("div",{className:"upsell-progress"},[Object.assign(e("div",{className:"upsell-progress-bar"}),{style:{width:"66%"}})])]);o.parentNode.insertBefore(t,o)}},init:function(){document.addEventListener("DOMContentLoaded",()=>{this.initUrgency(),this.initStickyCart(),this.initQuickView(),this.initExitIntent(),this.initSizeGuide(),this.initTrustBadges(),this.initWishlist(),this.initCountdown(),this.initUpsells()})}},window.SkyyRoseConversion.init()}();