<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKYYROSE | SIGNATURE RUNWAY</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #000; color: #fff; overflow: hidden; }
        
        #loading-screen {
            position: fixed; inset: 0; z-index: 1000;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }
        #loading-screen.hidden { opacity: 0; pointer-events: none; }
        .loading-logo {
            font-size: 3rem; font-weight: 300; letter-spacing: 1rem; margin-bottom: 2rem;
            background: linear-gradient(90deg, #C9A962, #FFD700, #C9A962);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }
        .loading-bar-container { width: 300px; height: 2px; background: rgba(201, 169, 98, 0.3); }
        .loading-bar { height: 100%; background: linear-gradient(90deg, #C9A962, #FFD700); width: 0%; transition: width 0.3s; }
        .loading-text { margin-top: 1rem; font-size: 0.8rem; letter-spacing: 0.3rem; color: rgba(201, 169, 98, 0.7); }
        
        #canvas-container { position: fixed; inset: 0; }
        #ui-overlay { position: fixed; inset: 0; pointer-events: none; z-index: 100; }
        
        .brand-header { position: absolute; top: 2rem; left: 2rem; pointer-events: auto; }
        .brand-name { font-size: 1.5rem; font-weight: 300; letter-spacing: 0.5rem; color: #C9A962; }
        .collection-name { font-size: 0.7rem; letter-spacing: 0.4rem; color: rgba(255, 215, 0, 0.6); margin-top: 0.3rem; }
        .tagline { font-size: 0.6rem; letter-spacing: 0.2rem; color: rgba(201, 169, 98, 0.5); margin-top: 0.5rem; }
        
        .show-info { position: absolute; bottom: 10rem; left: 2rem; }
        .show-title { font-size: 2rem; font-weight: 200; letter-spacing: 0.8rem; color: rgba(255, 215, 0, 0.8); }
        .show-subtitle { font-size: 0.7rem; letter-spacing: 0.4rem; color: rgba(201, 169, 98, 0.6); margin-top: 0.5rem; }
        
        .nav-controls {
            position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%);
            display: flex; gap: 1rem; pointer-events: auto;
        }
        .nav-btn {
            padding: 0.8rem 2rem; background: rgba(201, 169, 98, 0.15);
            border: 1px solid rgba(255, 215, 0, 0.4); color: #C9A962;
            font-size: 0.7rem; letter-spacing: 0.2rem; cursor: pointer;
            transition: all 0.3s; text-transform: uppercase;
        }
        .nav-btn:hover { background: rgba(255, 215, 0, 0.2); box-shadow: 0 0 20px rgba(255, 215, 0, 0.2); }
        
        .product-panel {
            position: absolute; right: 2rem; top: 50%; transform: translateY(-50%);
            width: 320px; background: rgba(10, 10, 10, 0.95);
            border: 1px solid rgba(201, 169, 98, 0.4); padding: 2rem;
            pointer-events: auto; opacity: 0; transition: opacity 0.5s;
        }
        .product-panel.visible { opacity: 1; }
        .product-title { font-size: 1.2rem; font-weight: 300; letter-spacing: 0.3rem; color: #C9A962; margin-bottom: 0.5rem; }
        .product-price { font-size: 1.5rem; font-weight: 200; margin-bottom: 1rem; }
        .product-desc { font-size: 0.8rem; line-height: 1.8; color: rgba(255,255,255,0.7); margin-bottom: 1.5rem; }
        .add-to-cart {
            width: 100%; padding: 1rem;
            background: linear-gradient(90deg, #8B7355, #C9A962, #FFD700);
            border: none; color: #000; font-size: 0.8rem; font-weight: 600;
            letter-spacing: 0.2rem; cursor: pointer; transition: all 0.3s;
        }
        .add-to-cart:hover { box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); transform: translateY(-2px); }
        
        .scene-indicator { position: absolute; bottom: 6rem; left: 50%; transform: translateX(-50%); display: flex; gap: 0.5rem; }
        .indicator-dot { width: 8px; height: 8px; border-radius: 50%; background: rgba(201, 169, 98, 0.4); cursor: pointer; pointer-events: auto; transition: all 0.3s; }
        .indicator-dot.active { background: #FFD700; box-shadow: 0 0 10px rgba(255, 215, 0, 0.6); }
        
        #debug-info { position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: #0f0; padding: 10px; font-family: monospace; font-size: 12px; z-index: 9999; max-width: 300px; }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-logo">SKYYROSE</div>
        <div class="loading-bar-container"><div class="loading-bar" id="loading-bar"></div></div>
        <div class="loading-text" id="loading-text">PREPARING THE RUNWAY...</div>
    </div>
    
    <div id="canvas-container"></div>
    
    <div id="ui-overlay">
        <div class="brand-header">
            <div class="brand-name">SKYYROSE</div>
            <div class="collection-name">SIGNATURE COLLECTION</div>
            <div class="tagline">PREMIUM ESSENTIALS • OAKLAND MADE</div>
        </div>
        <div class="show-info">
            <div class="show-title">FALL/WINTER 2025</div>
            <div class="show-subtitle">VIRTUAL FASHION SHOW</div>
        </div>
        <div class="product-panel" id="product-panel">
            <div class="product-title">SIGNATURE ESSENTIALS TEE</div>
            <div class="product-price">$145</div>
            <div class="product-desc">Premium heavyweight organic cotton tee with signature gold-foil logo. Gender-neutral fit with dropped shoulders and extended hem.</div>
            <button class="add-to-cart">ADD TO CART</button>
        </div>
        <div class="scene-indicator">
            <div class="indicator-dot active" data-scene="0"></div>
            <div class="indicator-dot" data-scene="1"></div>
            <div class="indicator-dot" data-scene="2"></div>
        </div>
        <div class="nav-controls">
            <button class="nav-btn" id="prev-btn">← PREV</button>
            <button class="nav-btn" id="explore-btn">RUNWAY WALK</button>
            <button class="nav-btn" id="next-btn">NEXT →</button>
        </div>
    </div>
    <div id="debug-info">Loading...</div>

    <script type="module">
        // VERIFIED CDN ASSETS
        const ASSETS = {
            models: {
                helmet: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Assets/main/Models/DamagedHelmet/glTF-Binary/DamagedHelmet.glb',
                duck: 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Assets/main/Models/Duck/glTF-Binary/Duck.glb'
            },
            hdris: {
                studio: 'https://dl.polyhaven.org/file/ph-assets/HDRIs/hdr/1k/studio_small_09_1k.hdr'
            }
        };

        import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
        import { OrbitControls } from 'https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js';
        import { GLTFLoader } from 'https://unpkg.com/three@0.160.0/examples/jsm/loaders/GLTFLoader.js';
        import { RGBELoader } from 'https://unpkg.com/three@0.160.0/examples/jsm/loaders/RGBELoader.js';
        import { EffectComposer } from 'https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/EffectComposer.js';
        import { RenderPass } from 'https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'https://unpkg.com/three@0.160.0/examples/jsm/postprocessing/UnrealBloomPass.js';

        const debug = document.getElementById('debug-info');
        function log(msg) { console.log(msg); debug.innerHTML = msg + '<br>' + debug.innerHTML.split('<br>').slice(0,10).join('<br>'); }

        let scene, camera, renderer, controls, composer, loadedModels = {}, spotlights = [], currentScene = 0;
        const loadingBar = document.getElementById('loading-bar');
        const loadingText = document.getElementById('loading-text');
        const loadingScreen = document.getElementById('loading-screen');
        const productPanel = document.getElementById('product-panel');

        function updateProgress(p, t) { loadingBar.style.width = Math.min(100,p)+'%'; loadingText.textContent = t; log(`${p}% - ${t}`); }

        async function init() {
            log('Initializing Signature Runway...');
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x050505);

            camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 1000);
            camera.position.set(0, 3, 20);

            renderer = new THREE.WebGLRenderer({ antialias: true, powerPreference: 'high-performance' });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.0;
            renderer.outputColorSpace = THREE.SRGBColorSpace;
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            controls = new OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.minDistance = 5;
            controls.maxDistance = 40;

            composer = new EffectComposer(renderer);
            composer.addPass(new RenderPass(scene, camera));
            composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight), 0.6, 0.3, 0.9));

            updateProgress(10, 'SCENE INITIALIZED...');
            await loadEnvironment();
            await loadModels();
            createRunwayScene();
            updateProgress(100, 'WELCOME TO THE SHOW');

            setTimeout(() => { loadingScreen.classList.add('hidden'); productPanel.classList.add('visible'); }, 1000);
            window.addEventListener('resize', onWindowResize);
            setupNavigation();
            animate();
        }

        async function loadEnvironment() {
            updateProgress(20, 'LOADING STUDIO ENVIRONMENT...');
            try {
                const hdri = await new RGBELoader().loadAsync(ASSETS.hdris.studio);
                hdri.mapping = THREE.EquirectangularReflectionMapping;
                scene.environment = hdri;
                log('✓ Studio HDRI loaded');
            } catch(e) {
                log('HDRI failed, using fallback');
                createStudioLighting();
            }
            updateProgress(40, 'ENVIRONMENT READY...');
        }

        function createStudioLighting() {
            scene.add(new THREE.AmbientLight(0x1a1a1a, 0.5));
            const key = new THREE.SpotLight(0xffffff, 10, 50, Math.PI/8, 0.5);
            key.position.set(0, 15, 10);
            key.castShadow = true;
            scene.add(key);
            scene.add(new THREE.SpotLight(0xC9A962, 3, 30, Math.PI/6, 0.5).translateX(-10).translateY(10));
            scene.add(new THREE.SpotLight(0xC9A962, 3, 30, Math.PI/6, 0.5).translateX(10).translateY(10));
            log('Studio lighting created');
        }

        async function loadModels() {
            updateProgress(50, 'LOADING MODELS...');
            try {
                const gltf = await new GLTFLoader().loadAsync(ASSETS.models.helmet);
                const model = gltf.scene;
                model.scale.set(3, 3, 3);
                model.position.set(0, 2, 0);
                model.traverse(c => { if(c.isMesh) { c.castShadow = true; c.receiveShadow = true; } });
                loadedModels.display = model;
                scene.add(model);
                log('✓ Display model loaded');
            } catch(e) {
                log('Model failed, creating placeholder');
                const g = new THREE.Group();
                const cube = new THREE.Mesh(new THREE.BoxGeometry(2,2,2), new THREE.MeshPhysicalMaterial({color:0xC9A962,metalness:0.9,roughness:0.1}));
                cube.position.y = 2; cube.rotation.y = Math.PI/4;
                g.add(cube);
                loadedModels.display = g;
                scene.add(g);
            }
            updateProgress(70, 'MODEL POSITIONED...');
        }

        function createRunwayScene() {
            updateProgress(80, 'BUILDING RUNWAY...');
            
            // Floor
            const runway = new THREE.Mesh(new THREE.PlaneGeometry(8, 60), new THREE.MeshStandardMaterial({color:0x0a0a0a,metalness:0.8,roughness:0.2}));
            runway.rotation.x = -Math.PI/2; runway.receiveShadow = true;
            scene.add(runway);

            // Gold strips
            const stripMat = new THREE.MeshStandardMaterial({color:0xC9A962,metalness:0.9,roughness:0.1,emissive:0xC9A962,emissiveIntensity:0.3});
            [-4, 4].forEach(x => {
                const strip = new THREE.Mesh(new THREE.PlaneGeometry(0.1, 60), stripMat);
                strip.rotation.x = -Math.PI/2; strip.position.set(x, 0.01, 0);
                scene.add(strip);
            });

            // Center line
            const center = new THREE.Mesh(new THREE.PlaneGeometry(0.05, 60), new THREE.MeshStandardMaterial({color:0xFFD700,emissive:0xFFD700,emissiveIntensity:0.5}));
            center.rotation.x = -Math.PI/2; center.position.y = 0.01;
            scene.add(center);

            // Audience silhouettes
            const seatMat = new THREE.MeshStandardMaterial({color:0x0a0a0a});
            for(let side of [-1, 1]) {
                for(let row = 0; row < 3; row++) {
                    for(let i = 0; i < 12; i++) {
                        const seat = new THREE.Mesh(new THREE.BoxGeometry(0.6, 1, 0.4), seatMat);
                        seat.position.set(side * (6 + row * 1.5), 0.5, -20 + i * 3);
                        scene.add(seat);
                    }
                }
            }

            // Spotlights
            const spotPositions = [{x:-6,z:-15},{x:6,z:-15},{x:-6,z:0},{x:6,z:0},{x:-6,z:15},{x:6,z:15},{x:0,z:-25},{x:0,z:20}];
            spotPositions.forEach((pos, i) => {
                const spot = new THREE.SpotLight(i%2===0 ? 0xFFFFFF : 0xC9A962, 8, 40, Math.PI/10, 0.5);
                spot.position.set(pos.x, 12, pos.z);
                spot.castShadow = true;
                spotlights.push({light:spot, phase:i*0.5});
                scene.add(spot);
                
                const housing = new THREE.Mesh(new THREE.CylinderGeometry(0.3,0.2,0.5,8), new THREE.MeshStandardMaterial({color:0x1a1a1a,metalness:0.9}));
                housing.position.set(pos.x, 12, pos.z);
                scene.add(housing);
            });

            // Backdrop
            const backdrop = new THREE.Mesh(new THREE.PlaneGeometry(30, 15), new THREE.MeshStandardMaterial({color:0x050505}));
            backdrop.position.set(0, 7.5, -30);
            scene.add(backdrop);

            // Logo text (simple boxes)
            const logoMat = new THREE.MeshStandardMaterial({color:0xC9A962,metalness:0.9,roughness:0.1,emissive:0xC9A962,emissiveIntensity:0.2});
            'SKYYROSE'.split('').forEach((c, i) => {
                const letter = new THREE.Mesh(new THREE.BoxGeometry(0.8, 2, 0.2), logoMat);
                letter.position.set(-5 + i * 1.2, 8, -29.5);
                scene.add(letter);
            });

            const logoLight = new THREE.SpotLight(0xFFD700, 5, 20, Math.PI/6, 0.3);
            logoLight.position.set(0, 12, -20);
            scene.add(logoLight);

            log('Runway scene complete');
            updateProgress(95, 'RUNWAY COMPLETE...');
        }

        function setupNavigation() {
            document.getElementById('prev-btn').onclick = () => { currentScene = (currentScene - 1 + 3) % 3; transitionScene(); };
            document.getElementById('next-btn').onclick = () => { currentScene = (currentScene + 1) % 3; transitionScene(); };
            document.getElementById('explore-btn').onclick = animateCameraAlongRunway;
            document.querySelectorAll('.indicator-dot').forEach(d => d.onclick = e => { currentScene = parseInt(e.target.dataset.scene); transitionScene(); });
        }

        function transitionScene() {
            document.querySelectorAll('.indicator-dot').forEach((d, i) => d.classList.toggle('active', i === currentScene));
            const positions = [{x:0,y:3,z:20}, {x:-12,y:6,z:5}, {x:12,y:8,z:-10}];
            tween(camera.position, positions[currentScene], 1500);
        }

        function animateCameraAlongRunway() {
            const path = [{x:0,y:2,z:25},{x:0,y:2,z:15},{x:0,y:2,z:5},{x:0,y:2,z:-5},{x:0,y:3,z:20}];
            let i = 0;
            function next() { if(i < path.length) { tween(camera.position, path[i++], 1500); setTimeout(next, 1800); } }
            next();
        }

        function tween(target, to, duration) {
            const start = {x:target.x, y:target.y, z:target.z}, startTime = Date.now();
            function update() {
                const p = Math.min((Date.now() - startTime) / duration, 1);
                const e = 1 - Math.pow(1 - p, 3);
                target.x = start.x + (to.x - start.x) * e;
                target.y = start.y + (to.y - start.y) * e;
                target.z = start.z + (to.z - start.z) * e;
                if(p < 1) requestAnimationFrame(update);
            }
            update();
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        }

        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;
            if(loadedModels.display) loadedModels.display.rotation.y += 0.003;
            spotlights.forEach(s => { s.light.intensity = 6 + Math.sin(time * 2 + s.phase) * 2; });
            controls.update();
            composer.render();
        }

        init().catch(e => { log('FATAL: ' + e.message); console.error(e); });
    </script>
</body>
</html>
